<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Flashcard App</title>
  <style>
    :root{
      --bg: #0f172a;                 /* slate-900 */
      --bg-accent: radial-gradient(1200px 600px at 20% -10%, #1e293b 0%, transparent 60%),
                   radial-gradient(900px 500px at 120% 10%, #0b5fff22 0%, transparent 65%),
                   radial-gradient(700px 500px at 50% 120%, #16a34a22 0%, transparent 70%);
      --card-front: #0b1220;         /* deep slate */
      --card-front-grad: linear-gradient(180deg, #111827 0%, #0b1220 100%);
      --card-back-grad: linear-gradient(180deg, #0b5fff 0%, #3b82f6 50%, #1d4ed8 100%);
      --text: #e5e7eb;               /* gray-200 */
      --muted: #94a3b8;              /* slate-400 */
      --primary: #22c55e;            /* green-500 */
      --primary-600:#16a34a;
      --danger:#ef4444;              /* red-500 */
      --danger-600:#dc2626;
      --surface:#0b1220aa;
      --ring:#60a5fa55;
      --shadow: 0 20px 50px rgba(0,0,0,.35);
      --radius: 20px;
    }

    * { box-sizing: border-box; }

    html,body{
      height:100%;
      margin:0;
      color:var(--text);
      background: var(--bg);
      background-image: var(--bg-accent);
      font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji";
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      overflow-x:hidden;
    }

    header{
      width:100%;
      max-width:1000px;
      padding:24px 20px 10px;
      margin:0 auto;
    }
    header h1{
      margin:0;
      font-weight:800;
      letter-spacing:.2px;
      font-size:clamp(22px, 3.2vw, 32px);
      background: linear-gradient(90deg,#e5e7eb,#a7f3d0 60%,#93c5fd);
      -webkit-background-clip:text;
      background-clip:text;
      color:transparent;
    }
    header p{
      margin:6px 0 0;
      color:var(--muted);
      font-size:14px;
    }

    .container{
      width:100%;
      max-width:1000px;
      margin:0 auto 40px;
      padding: 0 20px 20px;
      display:flex;
      flex-direction:column;
      gap:22px;
    }

    /* Flashcard Stage */
    .stage{
      width:100%;
      height: clamp(280px, 42vh, 520px);
      perspective: 1400px;
      position:relative;
      display:flex;
      align-items:center;
      justify-content:center;
    }

    /* Flashcard */
    .card{
      position:relative;
      width:min(92vw, 680px);
      height:100%;
      border-radius: var(--radius);
      transform-style: preserve-3d;
      transition: transform .7s cubic-bezier(.22,.61,.36,1);
      box-shadow: var(--shadow);
      cursor:pointer;
      outline: 1px solid #1f2937;
      background:#000;
    }
    .card.is-flipped{ transform: rotateY(180deg); }

    .face{
      position:absolute;
      inset:0;
      border-radius: var(--radius);
      padding: clamp(16px, 2.2vh, 28px);
      display:flex;
      align-items:flex-start;
      justify-content:flex-start;
      flex-direction:column;
      gap:12px;
      backface-visibility:hidden;
      color:var(--text);

      /* Text + scrolling rules (vertical only) */
      overflow-y:auto;
      overflow-x:hidden;
      word-break: break-word;
      overflow-wrap: anywhere;
      line-height:1.6;
      scrollbar-width: thin;
      scrollbar-color: #3b82f6 #0b1220;
    }
    .face::-webkit-scrollbar{ width:10px; }
    .face::-webkit-scrollbar-thumb{ background:#3b82f6; border-radius:10px; }
    .face::-webkit-scrollbar-track{ background:#0b1220; }

    .front{
      background:
        radial-gradient(120% 140% at 0% 0%, #16a34a22 0%, transparent 50%),
        var(--card-front-grad);
      border:1px solid #1f2937;
    }
    .back{
      transform: rotateY(180deg);
      background:
        radial-gradient(120% 140% at 100% 0%, #ffffff22 0%, transparent 50%),
        var(--card-back-grad);
      border:1px solid #1e3a8a;
    }

    .face h2{
      margin:0;
      font-size: clamp(18px, 2.2vh, 22px);
      font-weight:700;
      opacity:.95;
    }
    .face .content{
      font-size: clamp(16px, 2.1vh, 20px);
      opacity:.95;
      white-space: pre-wrap;
    }

    /* Toolbar (Prev/Next/Delete + counter) */
    .toolbar{
      display:flex;
      align-items:center;
      gap:12px;
      flex-wrap:wrap;
      justify-content:center;
      background: linear-gradient(180deg, #0b1220dd, #0b1220aa);
      border:1px solid #1f2937;
      border-radius: 16px;
      padding: 12px;
      box-shadow: var(--shadow);
      backdrop-filter: blur(8px);
    }
    .btn{
      appearance:none;
      border:none;
      border-radius: 12px;
      padding: 10px 16px;
      font-weight:700;
      letter-spacing:.2px;
      color:#0b1220;
      background: linear-gradient(180deg,#e5fff2,#bbf7d0);
      outline: 2px solid transparent;
      outline-offset:2px;
      transition: transform .15s ease, outline-color .15s ease, box-shadow .15s ease;
      box-shadow: 0 6px 18px rgba(34,197,94,.22);
      cursor:pointer;
    }
    .btn:hover{ transform: translateY(-1px); }
    .btn:active{ transform: translateY(0); }
    .btn:focus-visible{ outline-color: var(--ring); }
    .btn.secondary{
      color:#0b1220;
      background: linear-gradient(180deg,#eaf2ff,#c7d2fe);
      box-shadow: 0 6px 18px rgba(59,130,246,.22);
    }
    .btn.danger{
      color:#fff;
      background: linear-gradient(180deg,#ef4444,#dc2626);
      box-shadow: 0 6px 18px rgba(239,68,68,.35);
    }
    .count{
      min-width:72px;
      text-align:center;
      padding:8px 12px;
      border-radius:12px;
      color:#cbd5e1;
      border:1px solid #1f2937;
      background:#0b1220cc;
      font-weight:700;
    }

    /* Add-card panel */
    .panel{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:12px;
      background: linear-gradient(180deg,#0b1220ee,#0b1220cc);
      border:1px solid #1f2937;
      border-radius:16px;
      padding:14px;
      box-shadow: var(--shadow);
      backdrop-filter: blur(8px);
    }
    .panel h3{
      grid-column:1 / -1;
      margin:2px 0 6px;
      font-size:16px;
      color:#c7d2fe;
      letter-spacing:.2px;
    }
    textarea{
      width:100%;
      min-height:96px;
      resize:vertical;
      border-radius:12px;
      border:1px solid #263246;
      background:#0b1220;
      color:var(--text);
      padding:12px 12px;
      font: inherit;
      outline: none;
      transition:border-color .15s ease, box-shadow .15s ease;
    }
    textarea:focus{
      border-color:#3b82f6;
      box-shadow: 0 0 0 4px #3b82f633;
    }
    .panel .actions{
      grid-column:1 / -1;
      display:flex; gap:10px; justify-content:flex-end;
    }

    /* Delete modal */
    .modal-overlay{
      position:fixed; inset:0;
      background:rgba(2,6,23,.6);
      display:none; align-items:center; justify-content:center;
      z-index:1000;
    }
    .modal-overlay.active{ display:flex; }
    .modal{
      width: min(92vw, 420px);
      background:#0b1220;
      color:var(--text);
      border-radius:16px;
      border:1px solid #1f2937;
      padding:20px;
      box-shadow: var(--shadow);
      transform: translateY(8px);
      animation: pop .18s ease forwards;
    }
    @keyframes pop{ to{ transform: translateY(0);} }
    .modal .row{ display:flex; gap:10px; justify-content:flex-end; margin-top:14px; }

    /* Landscape auto-fullscreen */
    body.landscape-full{
      padding:0;
      overflow:hidden;
    }
    body.landscape-full header,
    body.landscape-full .toolbar,
    body.landscape-full .panel{ display:none !important; }
    body.landscape-full .container{
      max-width:none; width:100vw; height:100vh; padding:0; margin:0;
    }
    body.landscape-full .stage{
      height: 86vh; width:100vw; margin:0; padding:0;
    }
    body.landscape-full .card{
      width: min(88vw, 1100px);
      height: 100%;
      border-radius: 24px;
    }

    /* Safe-area padding on iOS */
    @supports (padding: env(safe-area-inset-top)) {
      body.landscape-full .stage{ padding-left: env(safe-area-inset-left); padding-right: env(safe-area-inset-right); }
    }

    /* Small screens tweaks */
    @media (max-width: 480px){
      .panel{ grid-template-columns:1fr; }
    }
  </style>
</head>
<body>
  <header>
    <h1>Flashcards</h1>
    <p>Tap card to flip â€¢ Swipe left/right to navigate (in landscape fullscreen)</p>
  </header>

  <main class="container">
    <!-- Flashcard stage -->
    <section class="stage" id="stage" aria-label="Flashcard Stage">
      <div class="card" id="flashcard" aria-live="polite">
        <div class="face front" id="frontFace">
          <h2 id="frontTitle">Front</h2>
          <div class="content" id="frontContent">Click to flip!</div>
        </div>
        <div class="face back" id="backFace">
          <h2 id="backTitle">Back</h2>
          <div class="content" id="backContent">Add your first card below.</div>
        </div>
      </div>
    </section>

    <!-- Toolbar -->
    <section class="toolbar" aria-label="Controls">
      <button class="btn secondary" id="prevBtn" aria-label="Previous Card">Prev</button>
      <div class="count" id="cardCount">0/0</div>
      <button class="btn secondary" id="nextBtn" aria-label="Next Card">Next</button>
      <button class="btn danger" id="deleteBtn" aria-label="Delete Current Card">Delete</button>
    </section>

    <!-- Add new card -->
    <section class="panel" aria-label="Add New Card">
      <h3>Create a new flashcard</h3>
      <textarea id="frontInput" placeholder="Front (e.g., 'Capital of France')"></textarea>
      <textarea id="backInput" placeholder="Back (e.g., 'Paris')"></textarea>
      <div class="actions">
        <button class="btn" id="addCardBtn">Add Card</button>
      </div>
    </section>
  </main>

  <!-- Delete Modal -->
  <div class="modal-overlay" id="deleteModal" role="dialog" aria-modal="true" aria-labelledby="delTitle">
    <div class="modal">
      <h3 id="delTitle" style="margin:0 0 10px">Delete this card?</h3>
      <p style="margin:0; color:var(--muted)">This action cannot be undone.</p>
      <div class="row">
        <button class="btn danger" id="confirmDeleteBtn">Delete</button>
        <button class="btn secondary" id="cancelDeleteBtn">Cancel</button>
      </div>
    </div>
  </div>

  <script>
    // DOM refs
    const card = document.getElementById('flashcard');
    const frontContent = document.getElementById('frontContent');
    const backContent  = document.getElementById('backContent');
    const prevBtn = document.getElementById('prevBtn');
    const nextBtn = document.getElementById('nextBtn');
    const deleteBtn = document.getElementById('deleteBtn');
    const addCardBtn = document.getElementById('addCardBtn');
    const frontInput = document.getElementById('frontInput');
    const backInput  = document.getElementById('backInput');
    const cardCount  = document.getElementById('cardCount');
    const deleteModal = document.getElementById('deleteModal');
    const confirmDeleteBtn = document.getElementById('confirmDeleteBtn');
    const cancelDeleteBtn  = document.getElementById('cancelDeleteBtn');

    // State
    let deck = [];
    let idx = 0;

    // Storage helpers (localStorage == on-device/app storage for browser)
    const KEY = 'flashcards';
    function save(){ try{ localStorage.setItem(KEY, JSON.stringify(deck)); }catch(e){ console.error(e); } }
    function load(){
      try{
        const raw = localStorage.getItem(KEY);
        deck = raw ? JSON.parse(raw) : [];
      }catch(e){ deck = []; }
    }

    // UI update
    function updateCount(){
      const total = deck.length;
      const current = total ? (idx + 1) : 0;
      cardCount.textContent = `${current}/${total}`;
    }
    function show(){
      if(!deck.length){
        frontContent.textContent = "No cards created yet.";
        backContent.textContent  = "Add your first card below.";
        card.classList.remove('is-flipped');
        updateCount();
        return;
      }
      const c = deck[idx];
      frontContent.textContent = c.front;
      backContent.textContent  = c.back;
      card.classList.remove('is-flipped');
      updateCount();
    }

    // Card CRUD
    function addCard(){
      const f = frontInput.value.trim();
      const b = backInput.value.trim();
      if(!f || !b){ alert('Please enter text for both sides.'); return; }
      deck.push({front:f, back:b});
      save();
      idx = deck.length - 1;
      frontInput.value = '';
      backInput.value = '';
      show();
    }
    function delCard(){
      if(!deck.length) return;
      deck.splice(idx,1);
      save();
      if(!deck.length){ idx = 0; show(); return; }
      idx = Math.min(idx, deck.length - 1);
      show();
    }
    function next(){ if(deck.length > 1){ idx = (idx + 1) % deck.length; show(); } }
    function prev(){ if(deck.length > 1){ idx = (idx - 1 + deck.length) % deck.length; show(); } }

    // Events
    card.addEventListener('click', () => {
      if(deck.length) card.classList.toggle('is-flipped');
    });
    addCardBtn.addEventListener('click', addCard);
    nextBtn.addEventListener('click', next);
    prevBtn.addEventListener('click', prev);
    deleteBtn.addEventListener('click', () => deleteModal.classList.add('active'));
    confirmDeleteBtn.addEventListener('click', () => { deleteModal.classList.remove('active'); delCard(); });
    cancelDeleteBtn.addEventListener('click', () => deleteModal.classList.remove('active'));

    // Swipe navigation (works in fullscreen landscape; no UI clutter)
    let touchStartX=0, touchStartY=0, touchTime=0;
    card.addEventListener('touchstart', (e)=>{
      if(!e.touches[0]) return;
      touchStartX = e.touches[0].clientX;
      touchStartY = e.touches[0].clientY;
      touchTime = Date.now();
    }, {passive:true});
    card.addEventListener('touchend', (e)=>{
      const dT = Date.now() - touchTime;
      const t = e.changedTouches[0];
      if(!t) return;
      const dx = t.clientX - touchStartX;
      const dy = t.clientY - touchStartY;
      const absX = Math.abs(dx), absY = Math.abs(dy);
      // Horizontal swipe with threshold, and more horizontal than vertical
      if(dT < 600 && absX > 60 && absX > absY){
        if(dx < 0) next(); else prev();
      }
    });

    // Auto fullscreen in LANDSCAPE (no manual button, exit by rotating back)
    function applyOrientation(){
      const landscape = window.innerWidth > window.innerHeight;
      document.body.classList.toggle('landscape-full', landscape);
    }
    window.addEventListener('resize', applyOrientation);
    window.addEventListener('orientationchange', applyOrientation);

    // Init
    (function init(){
      load();
      show();
      applyOrientation();
    })();
  </script>
</body>
</html>
